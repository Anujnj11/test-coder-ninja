"use strict";(self.webpackChunkninja_coder_app=self.webpackChunkninja_coder_app||[]).push([[772],{5772:(X,f,r)=>{r.r(f),r.d(f,{InterviewModule:()=>H});var l=r(6895),g=r(8176),T=r(5861);const _=[{language:"javascript",version:"18.15.0",aliases:["node-javascript","node-js","javascript","js"],runtime:"node"},{language:"dart",version:"2.12.1",aliases:[]},{language:"csharp.net",editorLang:"csharp",version:"5.0.201",aliases:["csharp","c#","cs","c#.net","cs.net","c#-dotnet","cs-dotnet","csharp-dotnet","dotnet-c#","dotnet-cs","dotnet-csharp"],runtime:"dotnet"},{language:"go",version:"1.16.2",aliases:["go","golang"]},{language:"java",version:"15.0.2",aliases:[]},{language:"kotlin",version:"1.4.31",aliases:["kt"]},{language:"csharp",editorLang:"csharp",version:"6.12.0",aliases:["mono","mono-csharp","mono-c#","mono-cs","c#","cs"],runtime:"mono"},{language:"php",version:"8.2.3",aliases:["php8","html"]},{language:"python2",version:"2.7.18",aliases:["py2","python2"]},{language:"python",version:"3.10.0",aliases:["py","py3","python3","python3.10"]},{language:"ruby",version:"3.0.1",aliases:["ruby3","rb"]},{language:"rust",version:"1.65.0",aliases:["rs"]},{language:"scala",version:"3.0.0",aliases:["sc"]},{language:"sqlite3",editorLang:"sql",version:"3.36.0",aliases:["sqlite","sql"]},{language:"swift",version:"5.3.3",aliases:["swift"]},{language:"typescript",version:"4.2.3",aliases:["ts","node-ts","tsc"]}],b={theme:"vs-dark",language:_[0].language,automaticLayout:!0,fontSize:16,zoom:.56},C="PANEL_USER_NAME";var d=r(6169),n=r(4650),p=r(5156),c=r(6272),h=r(433),k=r(4968);const I=["editorContainer"],m=new n.OlP("NGX_MONACO_EDITOR_CONFIG");let z,v=!1,N=(()=>{class t{constructor(e){this.config=e,this.onInit=new n.vpe,this._insideNg=!1}set insideNg(e){this._insideNg=e,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}ngAfterViewInit(){v?z.then(()=>{this.initMonaco(this._options,this.insideNg)}):(v=!0,z=new Promise(e=>{const o=this.config.baseUrl||"./assets";if("object"==typeof window.monaco)return this.initMonaco(this._options,this.insideNg),void e();const i=()=>{window.require.config({paths:{vs:`${o}/monaco/min/vs`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),e()})};if(window.require)i();else{const a=document.createElement("script");a.type="text/javascript",a.src=`${o}/monaco/min/vs/loader.js`,a.addEventListener("load",i),document.body.appendChild(a)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(m))},t.\u0275cmp=n.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(e,o){if(1&e&&n.Gf(I,7),2&e){let i;n.iGM(i=n.CRH())&&(o._editorContainer=i.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(e,o){},encapsulation:2}),t})(),P=(()=>{class t extends N{constructor(e,o){super(o),this.zone=e,this.editorConfig=o,this._value="",this.propagateChange=i=>{},this.onTouched=()=>{}}set options(e){this._options=Object.assign({},this.config.defaultOptions,e),this._editor&&(this._editor.dispose(),this.initMonaco(e,this.insideNg))}get options(){return this._options}set model(e){this.options.model=e,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}writeValue(e){this._value=e||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}initMonaco(e,o){const i=!!e.model;if(i){const a=monaco.editor.getModel(e.model.uri||"");a?(e.model=a,e.model.setValue(this._value)):e.model=monaco.editor.createModel(e.model.value,e.model.language,e.model.uri)}o?this._editor=monaco.editor.create(this._editorContainer.nativeElement,e):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer.nativeElement,e)}),i||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(a=>{const u=this._editor.getValue();this.zone.run(()=>{this.propagateChange(u),this._value=u})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,k.R)(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(n.R0b),n.Y36(m))},t.\u0275cmp=n.Xpm({type:t,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[n._Bn([{provide:h.JU,useExisting:(0,n.Gpc)(()=>t),multi:!0}]),n.qOj],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(e,o){1&e&&n._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]}),t})(),w=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:m,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez]}),t})();var x=r(1102),M=r(3679),L=r(6616),D=r(7044),U=r(1664),J=r(6903),S=r(5635),A=r(1971),y=r(6704),O=r(4383),F=r(7570),E=r(8231);const Z=["monacoEditor"];function R(t,s){if(1&t){const e=n.EpF();n.ynx(0),n.TgZ(1,"nz-form-item")(2,"nz-form-control",17)(3,"nz-input-group",18)(4,"input",19),n.NdJ("ngModelChange",function(i){n.CHM(e);const a=n.oxw();return n.KtG(a.userInfo.name=i)}),n.qZA()()()(),n.BQk()}if(2&t){const e=n.oxw();n.xp6(4),n.Q6J("ngModel",e.userInfo.name)}}function V(t,s){if(1&t&&(n._UZ(0,"nz-option",20),n.ALo(1,"uppercase")),2&t){const e=s.$implicit,o=s.index;n.s9C("nzLabel",n.lcZ(1,2,null==e?null:e.language)),n.s9C("nzValue",o)}}const j=function(t){return{"background-color":t}};function B(t,s){if(1&t&&n._UZ(0,"nz-avatar",21),2&t){const e=s.$implicit;n.s9C("nzText",null==e?null:e.name),n.Q6J("nzTooltipTitle",null==e?null:e.name)("nzTooltipColor",null==e?null:e.color)("ngStyle",n.VKq(4,j,null==e?null:e.color))}}function Q(t,s){if(1&t&&(n.TgZ(0,"p",22)(1,"span",23),n._uU(2),n.ALo(3,"lowercase"),n.qZA(),n.TgZ(4,"span",23),n._uU(5,"---RESET---"),n.qZA(),n._uU(6),n.qZA()),2&t){const e=s.$implicit;n.MGl("ngClass","",null!=e&&e.stderr?"danger":"success"," "),n.xp6(2),n.hij("Executed by ",n.lcZ(3,3,null==e?null:e.runBy),""),n.xp6(4),n.hij(" ",(null==e?null:e.stderr)||(null==e?null:e.output)," ")}}const K=[{path:"",canActivate:[c.Od],children:[{path:"",component:(()=>{class t{constructor(e,o,i,a,u,$){this.modal=e,this.interviewService=o,this.socketService=i,this.commonService=a,this.aRouter=u,this.router=$,this.code="",this.supportedLanguages=_,this.preferredLanguage="0",this.editorOptions=b,this.runningCode=!1,this.executedCodes=[],this.panelInfo={token:"",panelId:""},this.isVisibleName=!1,this.userInfo={name:"",color:"",socketId:""},this.connectedUsers=[]}ngOnInit(){var e=this;return(0,T.Z)(function*(){e.aRouter.queryParamMap.subscribe(o=>{e.panelInfo.panelId=o?.get("panelId")||"",e.panelInfo.token=o?.get("token")||""}),e.syncCodeData()})()}ngAfterViewInit(){this.preferredLanguageInfo=this.supportedLanguages[0],this.subscribedData()}ngOnDestroy(){}subscribedData(){this.socketService.getSocketService().subscribe(e=>{switch(e.action){case d.K.Events.InvalidToken:this.forceLogout(e?.data?.msg);break;case d.K.Events.CodeChange:e?.data?.msg&&(this.code=e?.data?.msg);break;case d.K.Events.UpdateSelection:this.setSelection(e?.data?.msg);break;case d.K.Events.SetCodeType:this.preferredLanguage=e?.data?.msg,setTimeout(()=>this.setCodeType(this.preferredLanguage),1e3);break;case d.K.Events.CodeExecute:this.setCodeExecution(e?.data?.msg);break;case d.K.Events.JoinUser:this.addUser(e?.data?.msg);break;case d.K.Events.LeftUser:this.removeUser(e?.data?.socketId)}})}syncCodeData(){console.log(this.panelInfo),this.socketService.setupSocketConnection(this.panelInfo.token,this.panelInfo.panelId),this.checkForName()}checkForName(){const e=this.commonService.getLocalStorage(C);e?(this.userInfo.name=e,this.handleOkForName()):this.isVisibleName=!0}updateSelection(){if(this.code){let e=this.monacoEditor?._editor?.getModel();e&&e?.getValueInRange(this.monacoEditor?._editor?.getSelection())&&this.socketService?.emitMessage(d.K.Events.UpdateSelection,this.monacoEditor?._editor?.getSelection())}}updateCodeType(e){this.setCodeType(e),this.socketService?.emitMessage(d.K.Events.SetCodeType,e)}onCodeChange(){this.code&&this.socketService?.emitMessage(d.K.Events.CodeChange,this.code)}runCode(){const e={language:this.preferredLanguageInfo?.language,version:this.preferredLanguageInfo?.version,files:[{content:this.code}]};this.runningCode=!this.runningCode,this.interviewService.executeCode(e).subscribe(o=>{this.runningCode=!this.runningCode;const i=o;i.run.runBy=this.userInfo.name,this.executedCodes.push(i.run),this.socketService?.emitMessage(d.K.Events.CodeExecute,JSON.stringify(i.run))})}handleOkForName(){this.userInfo={name:this.userInfo.name?this.userInfo.name:`dummy-${this.commonService.getUniqueId(1)}`,color:this.commonService.getRandomHex(),socketId:this.socketService.getSocketId()},this.isVisibleName=!1,this.addUser(this.userInfo),this.socketService?.emitMessage(d.K.Events.JoinUser,this.userInfo),this.commonService.setLocalStorage(C,this.userInfo.name)}forceLogout(e){this.isVisibleName=!1,this.modal.error({nzTitle:"Token is expired",nzContent:"You will be redirected back to homepage",nzOnOk:()=>{this.router.navigate(["/"])}})}setSelection(e){e&&(this.setSelection=e,this.monacoEditor?._editor?.setSelection(this.setSelection))}setCodeType(e){this.preferredLanguageInfo=this.supportedLanguages[e];const o=this.preferredLanguageInfo?.editorLang||this.preferredLanguageInfo?.language;let i=this.monacoEditor?._editor?.getModel();i&&monaco.editor.setModelLanguage(i,o)}setCodeExecution(e){this.executedCodes.push(JSON.parse(e))}addUser(e){if(!e)return;const o=this.connectedUsers.filter(i=>i.name!=e?.name);o.push(e),this.connectedUsers=o,console.log(this.connectedUsers)}removeUser(e){if(!e)return;const o=this.connectedUsers.filter(i=>i.socketId!=e);this.connectedUsers=o,console.log(this.connectedUsers)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(p.Sf),n.Y36(c.nm),n.Y36(c.$c),n.Y36(c.v_),n.Y36(g.gz),n.Y36(g.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-panel-socket"]],viewQuery:function(e,o){if(1&e&&n.Gf(Z,5),2&e){let i;n.iGM(i=n.CRH())&&(o.monacoEditor=i.first)}},decls:24,vars:13,consts:[["nzTitle","Join as","nzCentered","",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],["nz-row","","nzJustify","center","nzAlign","middle",1,"inner-content"],["nz-col","",3,"nzSpan"],["nz-row","","nzJustify","end","nzAlign","middle"],[3,"nzSize","nzDirection"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","Select language",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzTooltipPlacement","bottom","nz-tooltip","",3,"nzText","nzTooltipTitle","nzTooltipColor","ngStyle",4,"ngFor","ngForOf"],["nz-row","","nzJustify","center",2,"height","100vh"],[2,"height","100%",3,"options","ngModel","mouseup","keyup","ngModelChange"],["monacoEditor",""],[1,"code-output"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"run-code"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","right-circle"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["nz-input","","placeholder","Username",3,"ngModel","ngModelChange"],[3,"nzLabel","nzValue"],["nzTooltipPlacement","bottom","nz-tooltip","",3,"nzText","nzTooltipTitle","nzTooltipColor","ngStyle"],[3,"ngClass"],[1,"reset"]],template:function(e,o){1&e&&(n.TgZ(0,"nz-modal",0),n.NdJ("nzVisibleChange",function(a){return o.isVisibleName=a})("nzOnCancel",function(){return null})("nzOnOk",function(){return o.handleOkForName()})("nzOnCancel",function(){return o.handleOkForName()}),n.YNc(1,R,5,1,"ng-container",1),n.qZA(),n.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"nz-space",5)(6,"nz-select",6),n.NdJ("ngModelChange",function(a){return o.updateCodeType(a)})("ngModelChange",function(a){return o.preferredLanguage=a}),n.YNc(7,V,2,4,"nz-option",7),n.qZA()(),n.TgZ(8,"nz-avatar-group"),n.YNc(9,B,1,6,"nz-avatar",8),n.qZA()(),n.TgZ(10,"nz-card")(11,"div",9)(12,"div",3)(13,"ngx-monaco-editor",10,11),n.NdJ("mouseup",function(){return o.updateSelection()})("keyup",function(){return o.onCodeChange()})("ngModelChange",function(a){return o.code=a}),n.qZA()(),n.TgZ(15,"div",3)(16,"div",12)(17,"pre"),n._uU(18,'Welcome to the Ninja Coder Playground \u{1f44b}\n\nReady! Get started by editing the code on the\nleft side of the screen and clicking "Run code"\n                        '),n.qZA(),n.YNc(19,Q,7,5,"p",13),n.qZA()(),n.TgZ(20,"div",14)(21,"button",15),n.NdJ("click",function(){return o.runCode()}),n._UZ(22,"span",16),n._uU(23," Run code! "),n.qZA()()()()()()),2&e&&(n.Q6J("nzVisible",o.isVisibleName),n.xp6(3),n.Q6J("nzSpan",24),n.xp6(2),n.Q6J("nzSize","small")("nzDirection","vertical"),n.xp6(1),n.Q6J("ngModel",o.preferredLanguage),n.xp6(1),n.Q6J("ngForOf",o.supportedLanguages),n.xp6(2),n.Q6J("ngForOf",o.connectedUsers),n.xp6(3),n.Q6J("nzSpan",15),n.xp6(1),n.Q6J("options",o.editorOptions)("ngModel",o.code),n.xp6(2),n.Q6J("nzSpan",9),n.xp6(4),n.Q6J("ngForOf",null==o.executedCodes?null:o.executedCodes.reverse()),n.xp6(2),n.Q6J("nzLoading",o.runningCode))},dependencies:[l.mk,l.sg,l.PC,P,h.Fj,h.JJ,h.On,x.Ls,M.t3,M.SK,L.ix,D.w,U.dQ,J.NU,S.Zp,S.gB,A.bd,y.Nx,y.Fd,O.Dz,O.ZM,F.SY,E.Ip,E.Vq,p.du,p.Hf,l.gd,l.i8],styles:[".inner-content[_ngcontent-%COMP%]{margin:5px}.inner-content[_ngcontent-%COMP%]   .code-output[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:10px;overflow-y:auto;margin:0;cursor:text;height:100vh;font-size:16px;overflow:auto}.inner-content[_ngcontent-%COMP%]   .run-code[_ngcontent-%COMP%]{position:absolute;bottom:10%;right:40%}.inner-content[_ngcontent-%COMP%]   .run-code[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#000000de;background-color:#00bcb4;border-color:transparent}.inner-content[_ngcontent-%COMP%]   nz-select[_ngcontent-%COMP%]{width:200px;margin:10px}.inner-content[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{color:#ef233c}.inner-content[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#02c39a}.inner-content[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{font-size:14px;color:#5f6570;display:block}"]}),t})()}]}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(K),g.Bz]}),t})(),H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[l.ez,Y,w.forRoot(),c.m8]}),t})()}}]);